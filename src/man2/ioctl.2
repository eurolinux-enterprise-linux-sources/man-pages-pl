.\" {PTM/PB/0.1/09-05-1999/"kontroluj urz±dzenia"}
.\" Last update: A. Krzysztofowicz <ankry@mif.pg.gda.pl>, Aug 2002,
.\"              manpages 1.53
.\"
.\" Copyright (c) 1980, 1991 Regents of the University of California.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @(#)ioctl.2	6.4 (Berkeley) 3/10/91
.\"
.\" Modified 1993-07-23 by Rik Faith (faith@cs.unc.edu)
.\" Modified 1996-10-22 by Eric S. Raymond <esr@thyrsus.com>
.\" Modified 1999-06-25 by Rachael Munns <vashti@dream.org.uk>
.\" Modified 2000-09-21 by Andries Brouwer <aeb@cwi.nl>
.\"
.TH IOCTL 2 2000-09-21 "BSD" "Podrêcznik programisty Linuksa"
.SH NAZWA
ioctl \- sterowanie urz±dzeniem
.SH SK£ADNIA
.B #include <sys/ioctl.h>
.sp
.BI "int ioctl(int " d ", int " request ", ...);"
.SH OPIS
Funkcja
.B ioctl
manipuluje na podleg³ych jej parametrach urz±dzeñ, do których dostêp odbywa
siê poprzez pliki specjalne. W szczególno¶ci, za pomoc± ¿±dañ
.B ioctl
mo¿na kontrolowaæ wiele w³a¶ciwo¶ci operacyjnych specjalnych plików znakowych
(np. terminali). Argument
.I d
musi byæ otwartym deskryptorem pliku.
.PP
Drugi argument jest zale¿nym od urz±dzenia kodem polecenia. Trzeci argument
jest pozbawionym typu wska¼nikiem do obszaru pamiêci, tradycyjnie
.BI "char *" argp
(pochodzi z okresu zanim
.B "void *"
sta³o siê poprawne w C) i tak bêdzie nazywany w niniejszej dyskusji.
.PP
Ioctl
.I request
zawiera w sobie zakodowan± informacjê czy argument jest parametrem
.I wej¶ciowym
czy
.I wyj¶ciowym
oraz rozmiar
.I argp
tego argumentu w bajtach. Makra i definicje, u¿ywane do przekazywania 
.I request
do ioctl, znajduj± siê w pliku
.IR <sys/ioctl.h> .
.SH "WARTO¦Æ ZWRACANA"
Zazwyczaj, po pomy¶lnym zakoñczeniu zwracane jest zero.
Niektóre ioctl-e u¿ywaj± zwracanej warto¶ci jako parametru wyj¶ciowego
i zwracaj± wówczas pewn± warto¶æ nieujemn±.
Po b³êdzie zwracane jest \-1 i odpowiednio ustawiane
.IR errno .
.SH B£ÊDY
.TP 0.7i
.B EBADF
.I d
nie jest prawid³owym deskryptorem.
.TP
.B EFAULT
.I argp
wskazuje na niedostêpny obszar pamiêci.
.TP
.B ENOTTY
.I d
nie jest zwi±zane z urz±dzeniem znakowym.
.TP
.B ENOTTY
Podane ¿±danie nie ma zastosowania dla obiektu, na który wskazuje deskryptor
.IR d .
.TP
.B EINVAL
.I request
lub
.I argp
s± nieprawid³owe.
.SH "CONFORMING TO"
Brak jednego standardu.  Argumenty, zwracane warto¶ci i semantyka
.BR ioctl (2)
ró¿ni± siê w zale¿no¶ci od sterownika urz±dzenia, którego dotycz± (wywo³anie
jest u¿ywane jako uniwersalne dla operacji, które nie daj± siê ³adnie
dopasowaæ do uniksowego modelu strumieni we/wy). W
.BR ioctl_list (2)
znajduje siê lista wielu znanych wywo³añ
.BR ioctl .
Funkcja
.B ioctl
pojawi³a siê w wersji 7 AT&T UNIX.
.SH "ZOBACZ TAK¯E"
.BR execve (2),
.BR fcntl (2),
.BR ioctl_list (2),
.BR mt (4),
.BR sd (4),
.BR tty (4)
