.\" {PTM/PB/0.1/02-10-1998/"analizuj opcje linii komend"}
.\" Translation (c) 1998 Przemek Borys <pborys@p-soft.silesia.linux.org.pl>
.Dd 21 czerwca 1993
.Dt GETOPT 1
.Os
.Sh NAZWA
.Nm getopt
.Nd analizuj opcje linii komend
.Sh SK£ADNIA
.Nm set \-\- \`getopt optstring $*\`
.Sh OPIS
.Nm Getopt
jest u¿ywany do rozbijania opcji w liniach komend dla ³atwej analizy przez
procedury pow³okowe i do sprawdzania istnienia opcji legalnych.
.
.Op Optstring
jest ci±giem rozpoznawalnych liter opcyjnych (zobacz
.Xr getopt 3
);
je¶li po literze nastêpuje dwukropek, opcja ma w domy¶le argument, który mo¿e,
lecz nie musi byæ oddzielony od niej bia³± spacj±.
Opcja specjalna \fB--\fP
u¿ywana jest do wskazania koñca opcji.
Je¶li symbolu \fB\-\-\fP nie wstawiono w ci±g opcji jawnie,
.Nm getopt
podstawia automatycznie ten znak na samym koñcu opcji.
.
Argumenty pow³okowe
(\fB$1 $2\fR ...) s± resetowane tak, ¿e ka¿da opcja jest poprzedzona znakiem
\fB\-\fP
i w swoim w³asnym argumencie pow³okowym; ka¿dy argument opcyjny jest tak¿e w
swoim w³asnym argumencie pow³okowym.
.Sh PRZYK£AD
Nastêpuj±cy fragment kodu pokazuje jak mo¿na przetworzyæ argumenty komendy,
która mo¿e pobieraæ opcje
.Op a
i
.Op b ,
a tak¿e opcjê
.Op o ,
która wymaga argumentu.
.Pp
.Bd -literal -offset indent
set \-\- \`getopt abo: $*\`
if test $? != 0
then
	echo 'U¿ycie: ...'
	exit 2
fi
for i
do
	case "$i"
	in
		\-a|\-b)
			flag=$i; shift;;
		\-o)
			oarg=$2; shift; shift;;
		\-\-)
			shift; break;;
	esac
done
.Ed
.Pp
Kod ten przyjmie dowolne opcje z nastêpuj±cych jako identyczne:
.Pp
.Bd -literal -offset indent
cmd \-aoarg plik plik
cmd \-a \-o arg plik plik
cmd \-oarg -a plik plik
cmd \-a \-oarg \-\- plik plik
.Ed
.Sh ZOBACZ TAK¯E
.Xr sh 1 ,
.Xr getopt 3
.Sh DIAGNOSTYKA
.Nm Getopt
drukuje wiadomo¶æ o b³êdzie, je¶li napotka literê opcyjn± nieza³±czon± w
napisie
.Op optstring .
.Sh HISTORIA
Napisane przez Henry'ego Spencera, pracuj±cego na podstawie strony man Bell
Labs. Zachowanie powinno byæ identyczne jak w wersji Bell.
.Sh B£ÊDY
Takie same jak w
.Xr getopt 3 .
.Pp
Argumenty zawieraj±ce bia³e spacje, lub za³±czone metaznaki pow³oki nie
prze¿yj± nienaruszone; wygl±da to na ³atwy do naprawienia b³±d, lecz tak nie
jest.
.Pp
Wiadomo¶æ o b³êdzie dla nieprawid³owej opcji jest wskazywana jako pochodz±ca
z programu
.Nm getopt
a nie z procedury pow³okowej, zawieraj±cej wywo³anie
.Nm getopt ;
jest to znowu trudne do naprawienia.
.Pp
Najlepsza droga, czyli
.Nm set
, do ustawiania argumentów bez rozrywania warto¶ci opcji pow³okowych zmienia
siê z jednej wersji pow³oki na inn±.
