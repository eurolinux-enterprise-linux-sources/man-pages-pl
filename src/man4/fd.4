'\" t
.\" Copyright (c) 1993 Michael Haardt (michael@cantor.informatik.rwth-aachen.de)
.\" and 1994,1995 Alain Knaff (Alain.Knaff@imag.fr)
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified, Sun Feb 26 15:00:02 1995, faith@cs.unc.edu
.\"
.\" T³umaczenie na jêzyk polski: Pawe³ Olszewski (alder@amg.net.pl)
.\" {PTM/PO/0.2/02-06-1998/"urz±dzenie stacji dyskietek"}
.\" Aktualno¶æ: man-pages 1.48
.\"
.TH FD 4 1995-01-29 "Linux" "Pliki specjalne"
.SH NAZWA
fd \- urz±dzenie stacji dyskietek
.SH KONFIGURACJA
Napêdy dyskietek s± urz±dzeniami blokowymi o numerze g³ównym 2. Zazwyczaj
ich w³a¶cicielem jest root.floppy (tzn. u¿ytkownik root, grupa floppy) i maj±
prawa dostêpu 0660 (kontrola dostêpu za po¶rednictwem przynale¿no¶ci do grupy)
lub 0666 (swobodny dostêp dla ka¿dego). Numery poboczne symbolizuj± typ
urz±dzenia, numer napêdu i numer kontrolera. Dla ka¿dego typu
urz±dzenia (tj. kombinacji gêsto¶ci i liczby ¶cie¿ek) istnieje podstawowy
numer poboczny. Do tego numeru podstawowego dodaje siê numer napêdu na
kontrolerze i 128 je¶li napêd jest pod³±czony do drugiego
kontrolera. W podanych dalej tablicach urz±dzeñ \fIn\fP reprezentuje
numer napêdu.
.PP
\fBUwaga: Je¶li u¿ywa siê formatów z wiêksz± ilo¶ci± ¶cie¿ek, ni¿ ta, któr±
jest w stanie obs³u¿yæ napêd, mo¿na spowodowaæ jego fizyczne uszkodzenie.\fP
Jednorazowa próba, czy napêd obs³uguje wiêcej ni¿ zwyk³e 40/80 ¶cie¿ek nie
powinna go uszkodziæ, ale nie ma na to gwarancji. Lepiej nie tworzyæ plików
urz±dzeñ dla tych formatów, aby zapewniæ, ¿e nikt ich nie u¿yje.
.PP
Niezale¿ne od napêdu pliki urz±dzeñ, które automatycznie wykrywaj±
format i pojemno¶æ dyskietki:
.PP
.TS
l l.
Nazwa	Podst. nr pob.
_
\fBfd\fP\fIn\fP	0
.TE
.PP
Pliki urz±dzeñ napêdu 5.25 cala o podwójnej gêsto¶ci:
.PP
.TS
lw(1i) l l l l l.
Nazwa	Pojemn.	Cyl.	Sekt.	G³ow.	Podst. nr pob.
_
\fBfd\fP\fIn\fP\fBd360\fP	360K	40	9	2	4
.TE
.PP
Pliki urz±dzeñ napêdu 5.25 cala o wysokiej gêsto¶ci:
.PP
.TS
lw(1i) l l l l l.
Nazwa	Pojemn.	Cyl.	Sekt.	G³ow.	Podst. nr pob.
_
\fBfd\fP\fIn\fP\fBh360\fP	360K	40	9	2	20
\fBfd\fP\fIn\fP\fBh410\fP	410K	41	10	2	48
\fBfd\fP\fIn\fP\fBh420\fP	420K	42	10	2	64
\fBfd\fP\fIn\fP\fBh720\fP	720K	80	9	2	24
\fBfd\fP\fIn\fP\fBh880\fP	880K	80	11	2	80
\fBfd\fP\fIn\fP\fBh1200\fP	1200K	80	15	2	8
\fBfd\fP\fIn\fP\fBh1440\fP	1440K	80	18	2	40
\fBfd\fP\fIn\fP\fBh1476\fP	1476K	82	18	2	56
\fBfd\fP\fIn\fP\fBh1494\fP	1494K	83	18	2	72
\fBfd\fP\fIn\fP\fBh1600\fP	1600K	80	20	2	92
.TE
.PP
Pliki urz±dzeñ napêdu 3.5 cala o podwójnej gêsto¶ci:
.PP
.TS
lw(1i) l l l l l.
Nazwa	Pojemn.	Cyl.	Sekt.	G³ow.	Podst. nr pob.
_
\fBfd\fP\fIn\fP\fBD360\fP	360K	80	9	1	12
\fBfd\fP\fIn\fP\fBD720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBD800\fP	800K	80	10	2	120
\fBfd\fP\fIn\fP\fBD1040\fP	1040K	80	13	2	84
\fBfd\fP\fIn\fP\fBD1120\fP	1120K	80	14	2	88
.TE
.PP
Pliki urz±dzeñ napêdu 3.5 cala o wysokiej gêsto¶ci:
.PP
.TS
lw(1i) l l l l l.
Nazwa	Pojemn.	Cyl.	Sekt.	G³ow.	Podst. nr pob.
_
\fBfd\fP\fIn\fP\fBH360\fP	360K	40	9	2	12
\fBfd\fP\fIn\fP\fBH720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBH820\fP	820K	82	10	2	52
\fBfd\fP\fIn\fP\fBH830\fP	830K	83	10	2	68
\fBfd\fP\fIn\fP\fBH1440\fP	1440K	80	18	2	28
\fBfd\fP\fIn\fP\fBH1600\fP	1600K	80	20	2	124
\fBfd\fP\fIn\fP\fBH1680\fP	1680K	80	21	2	44
\fBfd\fP\fIn\fP\fBH1722\fP	1722K	82	21	2	60
\fBfd\fP\fIn\fP\fBH1743\fP	1743K	83	21	2	76
\fBfd\fP\fIn\fP\fBH1760\fP	1760K	80	22	2	96
\fBfd\fP\fIn\fP\fBH1840\fP	1840K	80	23	2	116
\fBfd\fP\fIn\fP\fBH1920\fP	1920K	80	24	2	100
.TE
.PP
Pliki urz±dzeñ napêdu 3.5 cala o gêsto¶ci extra:
.PP
.TS
lw(1i) l l l l l.
Nazwa	Pojemn.	Cyl.	Sekt.	G³ow.	Podst. nr pob.
_
\fBfd\fP\fIn\fP\fBE2880\fP	2880K	80	36	2	32
\fBfd\fP\fIn\fP\fBCompaQ\fP	2880K	80	36	2	36
\fBfd\fP\fIn\fP\fBE3200\fP	3200K	80	40	2	104
\fBfd\fP\fIn\fP\fBE3520\fP	3520K	80	44	2	108
\fBfd\fP\fIn\fP\fBE3840\fP	3840K	80	48	2	112
.TE
.SH OPIS
Pliki specjalne \fBfd\fP udostêpniaj± dyskietki w trybie surowym.
Nastêpuj±ce odwo³ania
.IR ioctl (2)
obs³ugiwane s± przez urz±dzenia \fBfd\fP:
.IP \fBFDCLRPRM\fP
usuwa informacje o no¶niku (geometrii dyskietki w stacji).
.IP \fBFDSETPRM\fP
ustawia informacje o no¶niku. Informacje te gin± wraz ze zmian± dyskietki.
.IP \fBFDDEFPRM\fP
ustawia informacje o no¶niku (geometrii dyskietki w
stacji). Informacje te nie gin± po zmianie dyskietki. Oznacza to
wy³±czenie automatycznego rozpoznawania no¶nika w razie jego
zmiany. Aby w³±czyæ autodetekcjê z powrotem, nale¿y u¿yæ
\fBFDCLRPRM\fP.
.IP \fBFDGETDRVTYP\fP
zwraca typ napêdu (parametr nazwy). Dla formatów, które dzia³aj± w
ró¿nych typach napêdów, \fBFDGETDRVTYP\fP zwraca nazwê, która
odpowiada najstarszemu typowi napêdu obs³uguj±cemu ten format.
.IP \fBFDFLUSH\fP
dezaktualizuje bufory cache dla danego napêdu.
.IP \fBFDSETMAXERRS\fP
ustawia progi b³êdów dla ich zg³aszania, anulowania operacji,
rekalibracji, resetowania i odczytu sektor po sektorze.
.IP \fBFDSETMAXERRS\fP
zwraca bie¿±ce progi b³êdów.
.IP \fBFDGETDRVTYP\fP
zwraca wewnêtrzn± nazwê napêdu.
.IP \fBFDWERRORCLR\fP
czy¶ci statystyki b³êdów zapisu.
.IP \fBFDWERRORGET\fP
odczytuje statystyki b³êdów zapisu. Nale¿± do nich: ca³kowita liczba
b³êdów zapisu, po³o¿enie i dysk, na którym wyst±pi³ pierwszy b³±d
zapisu oraz po³o¿enie i dysk, na którym wyst±pi³ ostatni b³±d zapisu.
Dyski identyfikowane s± przez generowany numer, zwiêkszany po ka¿dej
(niemal) zmianie dyskietki.
.IP \fBFDTWADDLE\fP
Wy³±cza silnik napêdu na kilka mikrosekund. Mo¿e to byæ niezbêdne dla
uzyskania dostêpu do dyskietki, której sektory s± zbyt blisko siebie.
.IP \fBFDSETDRVPRM\fP
ustawia ró¿ne parametry napêdu.
.IP \fBFDGETDRVPRM\fP
odczytuje te parametry.
.IP \fBFDGETDRVSTAT\fP
zwraca buforowany stan napêdu (dyskietka zmieniona, zabezpieczenie
przed zapisem, itd.)
.IP \fBFDPOLLDRVSTAT\fP
odpytuje napêd i zwraca jego stan.
.IP \fBFDGETFDCSTAT\fP
zwraca stan kontrolera napêdu dyskietek.
.IP \fBFDRESET\fP
resetuje kontroler napêdu dyskietek w konkretnych warunkach.
.IP \fBFDRAWCMD\fP
wysy³a surowe polecenie do kontrolera napêdu.
.PP
Aby uzyskaæ bardziej szczegó³owe informacje, zajrzyj równie¿ do plików
nag³ówkowych <linux/fd.h> i <linux/fdreg.h>, jak równie¿ do strony man
dla floppycontrol.
.SH UWAGI
Ró¿ne formaty pozwalaj± na zapis i odczyt wielu typów
dysków. Jednak¿e, je¶li dyskietka jest sformatowana ze zbyt ma³ym
odstêpem miêdzy sektorami, wydajno¶æ mo¿e spa¶æ nawet do poziomu, w
którym napêd bêdzie potrzebowa³ kilku sekund na odczytanie ca³ej
¶cie¿ki. Aby tego unikn±æ, nale¿y u¿ywaæ formatów z przeplotem. Niemo¿liwy
jest odczyt dyskietek sformatowanych przy u¿yciu GCR (group code
recording - grupowe nagrywanie kodu), stosowanego w komputerach Apple II
i Macintosh (dyskietki 800k). Nie dzia³a równie¿ odczyt z
dyskietek z twardymi sektorami (jedna przerwa na sektor, przerwa
indeksowa nieco przesuniêcia). By³o to powszechne na starych 8-mio
calowych dyskietkach.
.SH PLIKI
/dev/fd*
.SH AUTORZY
Alain Knaff (Alain.Knaff@imag.fr), David Niemi (niemidc@clark.net),
Bill Broadhurst (bbroad@netcom.com). 
.SH T£UMACZ
Pawe³ Olszewski (alder@amg.net.pl).
.SH "ZOBACZ TAK¯E"
.BR floppycontrol (1),
.BR mknod (1),
.BR chown (1),
.BR getfdprm (1),
.BR superformat (1),
.BR mount (8),
.BR setfdprm (8)
